local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

Rayfield:Notify({
   Title = "Hello!",
   Content = "Enjoy the script :)",
   Duration = 6.5,
   Image = 4483362458,
})

local Window = Rayfield:CreateWindow({
   Name = "Esp Script by Вася2",
   Icon = 0, 
   LoadingTitle = "Esp",
   LoadingSubtitle = "By Вася2",
   Theme = "Default",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = false,
      FolderName = nil,
      FileName = "Vasia2 Hub"
   },

   Discord = {
      Enabled = true, 
      Invite = "BxvGxzDB", 
      RememberJoins = true 
   },

   KeySystem = true, 
   KeySettings = {
      Title = "Vasia2",
      Subtitle = "Key System",
      Note = "Join to discord server for key: https://discord.gg/BxvGxzDB", 
      FileName = "Key",
      SaveKey = true, 
      GrabKeyFromSite = false,
      Key = {"Vasia2Sigma"}
   }
})

local Tab = Window:CreateTab("Esp Tab", 4483362458)

-- Изначально ESP отключен
local espEnabled = false
local nameEnabled = false
local hpEnabled = false
local lineEnabled = false
local lines = {}

-- Функция для включения/выключения ESP
local function toggleESP()
	espEnabled = not espEnabled

	for _, targetPlayer in ipairs(game:GetService("Players"):GetPlayers()) do
		if targetPlayer ~= game.Players.LocalPlayer then
			local character = targetPlayer.Character
			if character then
				for _, part in pairs(character:GetChildren()) do
					if part:IsA("BasePart") then
						if espEnabled then
							local highlight = Instance.new("BoxHandleAdornment")
							highlight.Name = "ESPHighlight"
							highlight.Adornee = part
							highlight.AlwaysOnTop = true
							highlight.ZIndex = 5
							highlight.Size = part.Size + Vector3.new(0.1, 0.1, 0.1)
							highlight.Color3 = Color3.fromRGB(255, 0, 0)
							highlight.Transparency = 0.5
							highlight.Parent = part
						else
							if part:FindFirstChild("ESPHighlight") then
								part.ESPHighlight:Destroy()
							end
						end
					end
				end
			end
		end
	end
end

-- Добавление кнопки для включения/выключения ESP
local Toggle = Tab:CreateToggle({
   Name = "ESP",
   CurrentValue = espEnabled,
   Flag = "Vasia2 Hub", -- Уникальный идентификатор для конфигурации
   Callback = function(Value)
      toggleESP() -- Переключение ESP
   end,
})

-- Создание других кнопок (например, для имени, HP и линий)
local function toggleName()
	-- Логика для отображения/удаления имен
end

local function toggleHP()
	-- Логика для отображения/удаления HP
end

local function toggleLines()
	-- Логика для отображения/удаления линий
end

-- Эти кнопки можно аналогично добавить, как это сделано с кнопкой ESP.
